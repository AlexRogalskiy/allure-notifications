plugins {
    id 'java'
}

group 'allure.notifications'
version '4.0.3'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    def slf4j_version = "1.7.36"
    def javax_mail_version = "1.6.2"
    def unirest_version = "3.13.7"
    def freemarker_version = "2.3.31"
    def xchart_version = "3.5.2"
    def jsonpath_version = "2.7.0"
    def commons_io_version = "2.10.0"

    compile(
            "org.slf4j:slf4j-log4j12:$slf4j_version",
            "com.sun.mail:javax.mail:$javax_mail_version",
            "com.konghq:unirest-java:$unirest_version",
            "org.freemarker:freemarker:$freemarker_version",
            "org.knowm.xchart:xchart:$xchart_version",
            "com.jayway.jsonpath:json-path:$jsonpath_version",
            "commons-io:commons-io:$commons_io_version"
    )
}

tasks.withType(JavaCompile) {
    System.getProperties()
    options.encoding = 'UTF-8'
}

jar {
    manifest {
        attributes(
                'Main-Class': 'guru.qa.allure.notifications.Application'
        )
    }
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}
